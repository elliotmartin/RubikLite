(self.webpackChunk_jupyter_widgets_jupyterlab_manager=self.webpackChunk_jupyter_widgets_jupyterlab_manager||[]).push([[388],{4782:(e,t)=>{"use strict";t.b$=function(e){var t,o,s=function(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.indexOf("=");return-1===o&&(o=t),[o,o===t?0:4-o%4]}(e),i=s[0],m=s[1],a=new n(function(e,t,o){return 3*(t+o)/4-o}(0,i,m)),d=0,l=m>0?i-4:i;for(o=0;o<l;o+=4)t=r[e.charCodeAt(o)]<<18|r[e.charCodeAt(o+1)]<<12|r[e.charCodeAt(o+2)]<<6|r[e.charCodeAt(o+3)],a[d++]=t>>16&255,a[d++]=t>>8&255,a[d++]=255&t;return 2===m&&(t=r[e.charCodeAt(o)]<<2|r[e.charCodeAt(o+1)]>>4,a[d++]=255&t),1===m&&(t=r[e.charCodeAt(o)]<<10|r[e.charCodeAt(o+1)]<<4|r[e.charCodeAt(o+2)]>>2,a[d++]=t>>8&255,a[d++]=255&t),a},t.JQ=function(e){for(var t,r=e.length,n=r%3,s=[],i=16383,m=0,d=r-n;m<d;m+=i)s.push(a(e,m,m+i>d?d:m+i));return 1===n?(t=e[r-1],s.push(o[t>>2]+o[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],s.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),s.join("")};for(var o=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,m=s.length;i<m;++i)o[i]=s[i],r[s.charCodeAt(i)]=i;function a(e,t,r){for(var n,s,i=[],m=t;m<r;m+=3)n=(e[m]<<16&16711680)+(e[m+1]<<8&65280)+(255&e[m+2]),i.push(o[(s=n)>>18&63]+o[s>>12&63]+o[s>>6&63]+o[63&s]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},1388:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ManagerBase:()=>_,base64ToBuffer:()=>d,bufferToBase64:()=>a,bufferToHex:()=>i,hexToBuffer:()=>m,serialize_state:()=>c});var r=o(2970),n=o(4782);const s=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"];function i(e){const t=new Uint8Array(e),o=[];for(let e=0;e<t.length;e++)o.push(s[t[e]]);return o.join("")}function m(e){const t=new Uint8Array(e.length/2);for(let o=0;o<e.length;o+=2)t[o/2]=parseInt(e.slice(o,o+2),16);return t.buffer}function a(e){return(0,n.JQ)(new Uint8Array(e))}function d(e){return(0,n.b$)(e).buffer}const l=r.PROTOCOL_VERSION.split(".",1)[0];class _{constructor(){this.comm_target_name="jupyter.widget",this._models=Object.create(null)}setViewOptions(e={}){return e}create_view(e,t={}){const o=(0,r.uuid)(),n=e.state_change=e.state_change.then((async()=>{try{const r=new(await this.loadClass(e.get("_view_name"),e.get("_view_module"),e.get("_view_module_version")))({model:e,options:this.setViewOptions(t)});return r.listenTo(e,"destroy",r.remove),await r.render(),r.once("remove",(()=>{delete e.views[o]})),r}catch(t){throw console.error(`Could not create a view for model id ${e.model_id}`),t}}));return e.views[o]=n,n}callbacks(e){return{}}get_model(e){return this._models[e]}handle_comm_open(e,t){const o=(t.metadata||{}).version||"";if(o.split(".",1)[0]!==l){const e=`Wrong widget protocol version: received protocol version '${o}', but was expecting major version '${l}'`;return console.error(e),Promise.reject(e)}const n=t.content.data,s=n.buffer_paths||[],i=(t.buffers||[]).map((e=>e instanceof DataView?e:new DataView(e instanceof ArrayBuffer?e:e.buffer)));return(0,r.put_buffers)(n.state,s,i),this.new_model({model_name:n.state._model_name,model_module:n.state._model_module,model_module_version:n.state._model_module_version,comm:e},n.state).catch((0,r.reject)("Could not create a model.",!0))}new_widget(e,t={}){let o;if(void 0===e.view_name||void 0===e.view_module||void 0===e.view_module_version)return Promise.reject("new_widget(...) must be given view information in the options.");o=e.comm?Promise.resolve(e.comm):this._create_comm(this.comm_target_name,e.model_id,{state:{_model_module:e.model_module,_model_module_version:e.model_module_version,_model_name:e.model_name,_view_module:e.view_module,_view_module_version:e.view_module_version,_view_name:e.view_name}},{version:r.PROTOCOL_VERSION});const n=Object.assign({},e);return o.then((e=>(n.comm=e,this.new_model(n,t).then((e=>(e.sync("create",e),e))))),(()=>(n.model_id||(n.model_id=(0,r.uuid)()),this.new_model(n,t))))}register_model(e,t){this._models[e]=t,t.then((t=>{t.once("comm:close",(()=>{delete this._models[e]}))}))}async new_model(e,t={}){let o;if(e.model_id)o=e.model_id;else{if(!e.comm)throw new Error("Neither comm nor model_id provided in options object. At least one must exist.");o=e.model_id=e.comm.comm_id}const r=this._make_model(e,t);return this.register_model(o,r),await r}async _make_model(e,t={}){const o=e.model_id,r=this.loadClass(e.model_name,e.model_module,e.model_module_version);let n;try{n=await r}catch(e){throw console.error("Could not instantiate widget"),e}if(!n)throw new Error(`Cannot find model module ${e.model_module}@${e.model_module_version}, ${e.model_name}`);const s=await n._deserialize_state(t,this),i=new n(s,{widget_manager:this,model_id:o,comm:e.comm});return i.name=e.model_name,i.module=e.model_module,i}clear_state(){return(0,r.resolvePromisesDict)(this._models).then((e=>{Object.keys(e).forEach((t=>e[t].close())),this._models=Object.create(null)}))}get_state(e={}){const t=Object.keys(this._models).map((e=>this._models[e]));return Promise.all(t).then((t=>c(t,e)))}set_state(e){if(!(e.version_major&&e.version_major<=2))throw"Unsupported widget state format";const t=e.state;return this._get_comm_info().then((e=>Promise.all(Object.keys(t).map((o=>{const n={base64:d,hex:m},s=t[o],i=s.state;if(s.buffers){const e=s.buffers.map((e=>e.path)),t=s.buffers.map((e=>new DataView(n[e.encoding](e.data))));(0,r.put_buffers)(s.state,e,t)}if(this._models[o])return this._models[o].then((e=>e.constructor._deserialize_state(i||{},this).then((t=>(e.set_state(t),e)))));const a={model_id:o,model_name:s.model_name,model_module:s.model_module,model_module_version:s.model_module_version};return Object.prototype.hasOwnProperty.call(e,"model_id")?this._create_comm(this.comm_target_name,o).then((e=>(a.comm=e,this.new_model(a)))):this.new_model(a,i)})))))}disconnect(){Object.keys(this._models).forEach((e=>{this._models[e].then((e=>{e.comm_live=!1}))}))}resolveUrl(e){return Promise.resolve(e)}filterExistingModelState(e){let t=e.state;return t=Object.keys(t).filter((e=>!this._models[e])).reduce(((e,o)=>(e[o]=t[o],e)),{}),Object.assign(Object.assign({},e),{state:t})}}function c(e,t={}){const o={};return e.forEach((e=>{const n=e.model_id,s=(0,r.remove_buffers)(e.serialize(e.get_state(t.drop_defaults))),i=s.buffers.map(((e,t)=>({data:a(e),path:s.buffer_paths[t],encoding:"base64"})));o[n]={model_name:e.name,model_module:e.module,model_module_version:e.get("_model_module_version"),state:s.state},i.length>0&&(o[n].buffers=i)})),{version_major:2,version_minor:0,state:o}}}}]);